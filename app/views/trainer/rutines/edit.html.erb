<main class="mb-5 container">
<%= content_tag :h1, "Editar Rutina para #{@rutine.user.name} "%>

<%= render "form", rutine: @rutine %>

<br>

<div id="sets">
  <h2>Series</h2>

  <div class="table-responsive">
  <table class="table table-hover">
    <thead>
      <tr>
        <th colspan="2">Ejercicio</th>
        <th>Repeticiones</th>
        <th>Peso</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @rutine.rutine_sets.each do |set| %>
        <% next if set.new_record? %>
        <tr>
          <td>
            <%= image_tag("exercises/#{set.exercise.name.parameterize}.png", width: "200px") if set.exercise.present? %>
          </td>
          <%= content_tag :td, set.exercise.try(:name) %>
          <%= content_tag :td, set.reps %>
          <td>
            <%= "#{set.weight} Kg" if set.weight.present? %>
          </td>
          <td>
            <%= button_to "Borrar", trainer_rutine_set_path(set: set, rutine_id: @rutine), method: :delete, class: "btn btn-danger" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  </div>
</div>

<%= form_with(model: [:trainer, @rutine_set]) do |form| %>
  <%= form.hidden_field :rutine_id %>

  <% if @rutine_set.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(@rutine_set.errors.count, "error") %> prohibited this rutine from being saved:</h2>

      <ul>
        <% @rutine_set.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mt-2">
    <%= form.label :exercise, "Ejercicio", class: "form-label" %>
    <%= form.collection_select(:exercise_id, Exercise.all, :id, :name, {}, class: "form-control") %>
  </div>

  <div class="mt-4">
    <%= form.label :reps, "Repeticiones", class: "form-label" %>
    <%= form.number_field :reps, class: "form-control" %>
  </div>

  <div class="mt-4">
    <%= form.label :weight, "Peso", class: "form-label" %>
    <%= form.number_field :weight, class: "form-control" %>
  </div>

  <div class="mt-3">
    <%= form.submit "Guardar", class: "btn btn-primary" %>
  </div>

<% end %>

<div>
  <%= link_to "Volver a atrÃ¡s", trainer_user_path(@rutine.user), class: "btn btn-primary" %>
</div>
</main>
